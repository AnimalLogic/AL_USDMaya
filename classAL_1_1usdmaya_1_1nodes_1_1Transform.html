<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>AL_USDMaya: AL::usdmaya::nodes::Transform Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AL_USDMaya
   &#160;<span id="projectnumber">0.29.4</span>
   </div>
   <div id="projectbrief">USD to Maya Bridge</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classAL_1_1usdmaya_1_1nodes_1_1Transform.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classAL_1_1usdmaya_1_1nodes_1_1Transform-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AL::usdmaya::nodes::Transform Class Reference<div class="ingroups"><a class="el" href="group__nodes.html">Nodes</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="classAL_1_1usdmaya_1_1nodes_1_1Transform.html" title="The AL::usdmaya::nodes::Transform node is a custom transform node that allows you to manipulate a USD...">AL::usdmaya::nodes::Transform</a> node is a custom transform node that allows you to manipulate a USD.  
 <a href="classAL_1_1usdmaya_1_1nodes_1_1Transform.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Transform_8h_source.html">Transform.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for AL::usdmaya::nodes::Transform:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classAL_1_1usdmaya_1_1nodes_1_1Transform.png" usemap="#AL::usdmaya::nodes::Transform_map" alt=""/>
  <map id="AL::usdmaya::nodes::Transform_map" name="AL::usdmaya::nodes::Transform_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad698059a1d41800e8fd2f9f08e171230"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad698059a1d41800e8fd2f9f08e171230"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AL_MAYA_DECLARE_NODE</b> ()</td></tr>
<tr class="separator:ad698059a1d41800e8fd2f9f08e171230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a7d22bc3cd6458e2f6d683414351515"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5a7d22bc3cd6458e2f6d683414351515"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AL_DECL_ATTRIBUTE</b> (primPath)</td></tr>
<tr class="separator:a5a7d22bc3cd6458e2f6d683414351515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d27e7867bad07ce6b21bd41306d89ce"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9d27e7867bad07ce6b21bd41306d89ce"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AL_DECL_ATTRIBUTE</b> (inStageData)</td></tr>
<tr class="separator:a9d27e7867bad07ce6b21bd41306d89ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c26b41bb30cdcf4c165f3dc09692c15"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6c26b41bb30cdcf4c165f3dc09692c15"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AL_DECL_ATTRIBUTE</b> (time)</td></tr>
<tr class="separator:a6c26b41bb30cdcf4c165f3dc09692c15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae6b8498f3bfe99bb12d5b3011492f24"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aae6b8498f3bfe99bb12d5b3011492f24"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AL_DECL_ATTRIBUTE</b> (timeOffset)</td></tr>
<tr class="separator:aae6b8498f3bfe99bb12d5b3011492f24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f297bf182490598b9c8d9535a204c25"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0f297bf182490598b9c8d9535a204c25"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AL_DECL_ATTRIBUTE</b> (timeScalar)</td></tr>
<tr class="separator:a0f297bf182490598b9c8d9535a204c25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8d2918576df24b27b9cf87d257de275"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae8d2918576df24b27b9cf87d257de275"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AL_DECL_ATTRIBUTE</b> (localTranslateOffset)</td></tr>
<tr class="separator:ae8d2918576df24b27b9cf87d257de275"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabe7cb75280d02410be4435b34980391"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aabe7cb75280d02410be4435b34980391"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AL_DECL_ATTRIBUTE</b> (pushToPrim)</td></tr>
<tr class="separator:aabe7cb75280d02410be4435b34980391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c954be32cb598a2025f2cb1a5a1e269"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5c954be32cb598a2025f2cb1a5a1e269"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AL_DECL_ATTRIBUTE</b> (readAnimatedValues)</td></tr>
<tr class="separator:a5c954be32cb598a2025f2cb1a5a1e269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35603b57de1feb0bd6155819c3e67f66"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a35603b57de1feb0bd6155819c3e67f66"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AL_DECL_ATTRIBUTE</b> (outTime)</td></tr>
<tr class="separator:a35603b57de1feb0bd6155819c3e67f66"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Methods</h2></td></tr>
<tr class="memitem:a57abea2eab0844c2f13c603ffbdec90b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classAL_1_1usdmaya_1_1nodes_1_1TransformationMatrix.html">TransformationMatrix</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAL_1_1usdmaya_1_1nodes_1_1Transform.html#a57abea2eab0844c2f13c603ffbdec90b">transform</a> () const </td></tr>
<tr class="memdesc:a57abea2eab0844c2f13c603ffbdec90b"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the transformation matrix for this transform node  <a href="#a57abea2eab0844c2f13c603ffbdec90b">More...</a><br /></td></tr>
<tr class="separator:a57abea2eab0844c2f13c603ffbdec90b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa74af0b2205e7f9bf07d96b3ccd0d50d"><td class="memItemLeft" align="right" valign="top">MPxNode::SchedulingType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAL_1_1usdmaya_1_1nodes_1_1Transform.html#aa74af0b2205e7f9bf07d96b3ccd0d50d">schedulingType</a> () const override</td></tr>
<tr class="memdesc:aa74af0b2205e7f9bf07d96b3ccd0d50d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable parallel evaluation.  <a href="#aa74af0b2205e7f9bf07d96b3ccd0d50d">More...</a><br /></td></tr>
<tr class="separator:aa74af0b2205e7f9bf07d96b3ccd0d50d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73218ba02d13cb9183568e78c2b2ec3a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a73218ba02d13cb9183568e78c2b2ec3a"></a>
const MObject&#160;</td><td class="memItemRight" valign="bottom"><b>getProxyShape</b> () const </td></tr>
<tr class="separator:a73218ba02d13cb9183568e78c2b2ec3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classAL_1_1usdmaya_1_1nodes_1_1Transform.html" title="The AL::usdmaya::nodes::Transform node is a custom transform node that allows you to manipulate a USD...">AL::usdmaya::nodes::Transform</a> node is a custom transform node that allows you to manipulate a USD. </p>
<p>custom MPxTransformationMatrix type (<a class="el" href="classAL_1_1usdmaya_1_1nodes_1_1TransformationMatrix.html" title="This class provides a transformation matrix that allows you to apply tweaks over some read only trans...">AL::usdmaya::nodes::TransformationMatrix</a>). The custom transformation matrix listens for changes that affect the transform (e.g. rotateBy, translateBy, etc), and if <b>pushToPrim</b> is enabled, applies those changes to the USD transformation.</p>
<p>Typically this node should have two input connections: </p><ul>
<li><b>inStageData</b> - connected from the output stage data of an <a class="el" href="classAL_1_1usdmaya_1_1nodes_1_1ProxyShape.html" title="A custom proxy shape node that attaches itself to a USD file, and then renders it. The stage is held internally as a member variable, and it will be composed based on a change to the &quot;filePath&quot; attribute. ">AL::usdmaya::nodes::ProxyShape</a> </li>
<li><b>time</b> - (probably) connected from the output time of an <a class="el" href="classAL_1_1usdmaya_1_1nodes_1_1ProxyShape.html" title="A custom proxy shape node that attaches itself to a USD file, and then renders it. The stage is held internally as a member variable, and it will be composed based on a change to the &quot;filePath&quot; attribute. ">AL::usdmaya::nodes::ProxyShape</a>, or directly to the time1.outAttr or equivalent.</li>
</ul>
<pre class="fragment">    The following attributes can be used to scale and offset the time values:
     \li \b timeOffset - an offset (in current UI time units) of say 30, means animation wont start until frame 30.
     \li \b timeScalar - a speed multiplier. 2.0 will double the playback speed, 0.5 will halve it.


    The following attribute determines which UsdPrim is being watched:
     \li \b primPath - a Usd path of the prim being watched, e.g.  "/root/foo/pCube1"


    We then have these two attributes:
     \li \b localTranslateOffset - an offset applied *after* all other transforms. Useful for positioning items on a table.
     \li \b pushToPrim - When enabled, any changes you make to the transform values in maya, will be pushed back onto the USD primitive.


    Finally we have the following outputs:
     \li \b outTime = (time - timeOffset) * timeScalar
</pre><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000009">Todo:</a></b></dt><dd>General todo list, and other quirks....<ol type="1">
<li>pushToPrim when enabled, does not add transform operations into the UsdPrim it is tracking. So for example, if you have a prim with no transform ops, not much is going to happen. If however your prim has the full spectrum of rotate axis, translate, scale, rotate, shear, etc; then you will be able to have full control over the prim. This will need to be addressed at some point soon. One of the more challenging aspects here is that we will need to modify a) the geom op order [e.g. insert a scale op, where there was not one before]; and b) rotation is going to be a PITA [There may be a rotateX op, but after modification that may need to be deleted, and replaced with a rotateXYZ op]</li>
<li>If pushToPrim is disabled, any modifications to the transform values are stored as offsets from the USD prim values. This works quite well for local space operations such as scale and rotation, semi-works for translation [effectively this is a parent space translation offset - useful for moving an anim clip] However for values such as rotation and scale pivots, yeah, the result might be a little strange.</li>
<li>I'm not convinced the way that I've organised compute and validateAndSetValue is ideal. It works, but if anyone has some improvements to suggest, I'm all ears.</li>
<li>Generally speaking, when localTranslateOffset is (0,0,0), then the translate/rotate/scale tools work quite well. If however localTranslateOffset is not (0,0,0), then the behaviour of the rotate tool is a little odd. Really this should be taken into account within the AL::usdmaya::nodes::TransformationMatrix::rotateBy and AL::usdmaya::nodes::TransformationMatrix::rotateTo methods.</li>
<li>If the usd prim xform stack has only one pivot, any separate modifications of scale/rotate pivot in maya will result in an undefined behavior. </li>
</ol>
</dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa74af0b2205e7f9bf07d96b3ccd0d50d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MPxNode::SchedulingType AL::usdmaya::nodes::Transform::schedulingType </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enable parallel evaluation. </p>
<dl class="section return"><dt>Returns</dt><dd>MPxNode::kParallel </dd></dl>

</div>
</div>
<a class="anchor" id="a57abea2eab0844c2f13c603ffbdec90b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAL_1_1usdmaya_1_1nodes_1_1TransformationMatrix.html">TransformationMatrix</a>* AL::usdmaya::nodes::Transform::transform </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>returns the transformation matrix for this transform node </p>
<dl class="section return"><dt>Returns</dt><dd>the transformation matrix </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/lib/AL_USDMaya/AL/usdmaya/nodes/<a class="el" href="Transform_8h_source.html">Transform.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceAL.html">AL</a></li><li class="navelem"><b>usdmaya</b></li><li class="navelem"><b>nodes</b></li><li class="navelem"><a class="el" href="classAL_1_1usdmaya_1_1nodes_1_1Transform.html">Transform</a></li>
    <li class="footer">Generated on Fri Nov 2 2018 11:40:21 for AL_USDMaya by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
